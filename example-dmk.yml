component:
  kind: Project
  name: Example
  machineName: example
  description: This is a example using the provided examples. See README.md
databases:
  cassandra_docker_local:
    component:
      kind: Database
      name: Cassandra Dev
      machineName: cassandra_docker_local
      description: Example data on the cassandra cluster
    driver: cassandra
    configuration:
      clusterList: localhost:39042
      consistency: Quorum
      keyspace: example
  example_csv_data:
    component:
      kind: Database
      name: Example CSV Data
      machineName: example_csv_data
      description: A CSV file with example data.
    driver: csv
    configuration:
      filePath: ./dev/example.csv
migrations:
  example_csv_to_cassandra:
    component:
      kind: Migration
      name: Example CSV to Cassandra
      machineName: example_csv_to_cassandra
      description: Load add example data from CSV into cassandra
    sourcedb: example_csv_data
    destinationdb: cassandra_docker_local
    sourcequery: |
      *
    destinationquery: |
      INSERT INTO migration_data JSON '{"id": "{{.id}}", "name": "{{.Name}}"}'
    transformationscript: |
      console.log("Im inside the DMK!")
      data.Something = "Hello DMK"
      if (data.id === "3") { console.log("GOT 3") }
      console.log(time.
      data.Name = data.Name + " from js"

